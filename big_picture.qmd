---
title: "Big Picture"
description: "A 538/Upshot style article about the data."
toc: true
draft: FALSE
---

![](images/The_Big_Picture_2.jpeg)

This comes from the file `big_picture.qmd`.

Think of this page as your 538/Upshot style article. This means that you should try to tell a story through the data and your analysis. Read articles from those sites and similar sites to get a feeling for what they are like. Try to write in the style of a news or popular article. Importantly, this pge should be geared towards the general public. You shouldn't assume the reader understands how to interpret a linear regression. Focus on interpretation and visualizations.


#### Household Weight proportions by Income groups in each Race/Ethnicity
![](images/Household weight.png)

#### Interactive Map

```{r include = FALSE}
merged_data <- readRDS("dataset-ignore/merged_data.rds")
```

```{r echo = FALSE}
# install.packages("leaflet")
library(RColorBrewer)
library(leaflet)
library(scales)

palette <- brewer.pal(9, "Pastel1")
palette[length(palette)] <- "#8FBC8F"  

# Creating color factors for each category
race_colors <- colorFactor(palette, domain = merged_data$Least_Common_Race_Ethnicity, na.color = "grey50")
income_colors <- colorNumeric(palette = "viridis", domain = merged_data$Average_Income, na.color = "grey50")
education_colors <- colorFactor(brewer.pal(9, "Set3"), domain = merged_data$Most_Common_Education_Level, na.color = "grey50")

# Create the interactive leaflet map
interactive_map <- leaflet(merged_data) %>%
  addProviderTiles(providers$CartoDB.Positron) %>%
  addPolygons(
    fillColor = ~race_colors(Least_Common_Race_Ethnicity),
    color = "#444444",
    weight = 1,
    opacity = 1,
    fillOpacity = 0.7,
    popup = ~paste(NAME, "<br>", "Least Common Race/Ethnicity: ", Least_Common_Race_Ethnicity),
    group = "Race/Ethnicity",
    highlightOptions = highlightOptions(
      weight = 3,
      color = "#666",
      fillOpacity = 0.7,
      bringToFront = TRUE
    )
  ) %>%
  addPolygons(
    fillColor = ~income_colors(Average_Income),
    color = "#444444",
    weight = 1,
    opacity = 1,
    fillOpacity = 0.7,
    popup = ~paste(NAME, "<br>", "Average Income: ", dollar_format()(Average_Income)),
    group = "Average Income"
  ) %>%
  addPolygons(
    fillColor = ~education_colors(Most_Common_Education_Level),
    color = "#444444",
    weight = 1,
    opacity = 1,
    fillOpacity = 0.7,
    popup = ~paste(NAME, "<br>", "Most Common Education Level: ", Most_Common_Education_Level),
    group = "Education Level"
  ) %>%
  addLegend("bottomright", pal = race_colors, values = ~Least_Common_Race_Ethnicity, title = "Race/Ethnicity",
            opacity = 0.7, group = "Race/Ethnicity") %>%
  addLegend("bottomright", pal = income_colors, values = ~Average_Income, title = "Average Income",
            opacity = 0.7, group = "Average Income", labFormat = labelFormat(prefix = "$")) %>%
  addLegend("bottomright", pal = education_colors, values = ~Most_Common_Education_Level, title = "Education Level",
            opacity = 0.7, group = "Education Level") %>%
  addLayersControl(
    baseGroups = c("Race/Ethnicity", "Average Income", "Education Level"),
    options = layersControlOptions(collapsed = FALSE)
  )

print(interactive_map)
```
