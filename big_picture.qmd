---
title: "Big Picture"
description: "A 538/Upshot style article about the data."
toc: true
draft: FALSE
---

![](images/big_picture_image.png)

## Thesis

Our study looks into racial disparities in the New York state and we found that racial disparities existed at income, education, and geographically across in each county in the state.

#### Household Weight proportions by Income groups in each Race/Ethnicity

![](images/Household%20weight.png) This graph shows that education levels vary among races. As we can observe here, Asian and White race has the highest education attainment while Black and Hispanic families shared a much lower education attainment level.

#### Racial disparities on education level's impact on education

```{r, echo = FALSE}
## Loading Clean Data
library(here)
# Set the path to the RDS file
cleaned_dataset_path_rds <- here("dataset", "cleaned_NYSERDA_LMI_Census_2013-2015.rds")
# Load the dataset from the RDS file
clean_data <- readRDS(cleaned_dataset_path_rds)
```

```{r, echo = FALSE}
library(ggplot2)
ggplot(clean_data, aes(x = Race_Ethnicity, fill = Income_Groups)) +
  geom_bar(position = "fill", stat = "count") +
  facet_wrap(~ Education_Level) +
  labs(title = "Income Distribution by Education Level and Race",
       x = "Education Level",
       y = "Percentage") +
  scale_y_continuous(labels = scales::percent) +
  theme_minimal() + 
  theme(text = element_text(size = 12), 
        axis.text.x = element_text(angle = 45, hjust = 1), 
        strip.text.x = element_text(size = 7, face = "bold")) 
```
We often relate educations attainment with income levels and assume it's one of the most important indicator of education levels, and a higher education attainment means higher income. However, different races may experience different educational influence in their income. As we can observe in this chart, where each chart shows the different distribution of income levels between different races at a given income level, Black population often exhibit the least proportion of income higher than $50000 compared to its counterpart with the same education level. This graph suggests that racial disparities could contribute to how education influences income level and some races are less beneficial than others in education.

#### Interactive Map

Exaplanation of the Map:

now let's look at the New York State from its map. With all the 62 counties in New York, they different from each others in terms of racial demographics, income level, education levels, and much more.

Here in the map, we can observe and identify that certain counties with higher proportion of certain races would have higher or lower income. For example, Manhattan county in the middle of NYC has a significantly higher average wage than other counties. Bronx county just up north Manhattan with higher Black & African American population has much lower income compared other counties in the state. This map expose the racial inequalty existed in county level, also implicating the racial segregation in the New York State.

```{r include = FALSE}
merged_data <- readRDS("dataset-ignore/merged_data.rds")
```

```{r echo = FALSE}
# install.packages("leaflet")
library(RColorBrewer)
library(leaflet)
library(scales)

palette <- brewer.pal(9, "Pastel1")
palette[length(palette)] <- "#8FBC8F"  

# Creating color factors for each category
race_colors <- colorFactor(palette, domain = merged_data$Least_Common_Race_Ethnicity, na.color = "grey50")
income_colors <- colorNumeric(palette = "viridis", domain = merged_data$Average_Income, na.color = "grey50")
education_colors <- colorFactor(brewer.pal(9, "Set3"), domain = merged_data$Most_Common_Education_Level, na.color = "grey50")

# Create the interactive leaflet map
interactive_map <- leaflet(merged_data) %>%
  addProviderTiles(providers$CartoDB.Positron) %>%
  addPolygons(
    fillColor = ~race_colors(Least_Common_Race_Ethnicity),
    color = "#444444",
    weight = 1,
    opacity = 1,
    fillOpacity = 0.7,
    popup = ~paste(NAME, "<br>", "Least Common Race/Ethnicity: ", Least_Common_Race_Ethnicity),
    group = "Race/Ethnicity",
    highlightOptions = highlightOptions(
      weight = 3,
      color = "#666",
      fillOpacity = 0.7,
      bringToFront = TRUE
    )
  ) %>%
  addPolygons(
    fillColor = ~income_colors(Average_Income),
    color = "#444444",
    weight = 1,
    opacity = 1,
    fillOpacity = 0.7,
    popup = ~paste(NAME, "<br>", "Average Income: ", dollar_format()(Average_Income)),
    group = "Average Income"
  ) %>%
  addPolygons(
    fillColor = ~education_colors(Most_Common_Education_Level),
    color = "#444444",
    weight = 1,
    opacity = 1,
    fillOpacity = 0.7,
    popup = ~paste(NAME, "<br>", "Most Common Education Level: ", Most_Common_Education_Level),
    group = "Education Level"
  ) %>%
  addLegend("bottomright", pal = race_colors, values = ~Least_Common_Race_Ethnicity, title = "Race/Ethnicity",
            opacity = 0.7, group = "Race/Ethnicity") %>%
  addLegend("bottomright", pal = income_colors, values = ~Average_Income, title = "Average Income",
            opacity = 0.7, group = "Average Income", labFormat = labelFormat(prefix = "$")) %>%
  addLegend("bottomright", pal = education_colors, values = ~Most_Common_Education_Level, title = "Education Level",
            opacity = 0.7, group = "Education Level") %>%
  addLayersControl(
    baseGroups = c("Race/Ethnicity", "Average Income", "Education Level"),
    options = layersControlOptions(collapsed = FALSE)
  )

print(interactive_map)
```
